<!DOCTYPE html> 
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <link rel="icon" href="img/reciclaSSA.png" type="image/png">
  <title>Bem-vindo ao ReciclaSSA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/bemvindo.css">
  <link rel="stylesheet" href="css/sidebar.css">
  <link rel="stylesheet" href="css/suporte.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
</head>
<body class="bem">

  <div id="sidebar-container"></div>

  <main class="content"> 
    <div class="boas-vindas">
      <h2 id="boas-vindas">Bem-vindo ao <span>ReciclaSSA</span></h2>
      <p class="descricao">
        Recicle com a gente e acumule pontos! Veja como funciona abaixo:
      </p>
      <div class="info-sistema">
        <p><strong>Como funciona?</strong></p>
        <p>Troque materiais recicl√°veis por pontos e use-os para conquistar pr√™mios incr√≠veis! O sistema √© simples: colete e separe os recicl√°veis, fa√ßa o agendamento na cooperativa mais pr√≥xima, e pronto, seus itens reciclados ser√£o transformados em pontos que ser√£o creditados em sua conta. 
          Quanto mais voc√™ reciclar, mais pontos voc√™ acumula, at√© poder troc√°-los por pr√™mios e benef√≠cios exclusivos. Conhe√ßa nosso site navegando pela guia no canto esquerdo.</p>
      </div>

   <section class="parcerias">
  <h3>Quem torna este projeto poss√≠vel:</h3>

<section class="empresas">
  <div class="empresa">
    <a href="https://www.ba.gov.br/" target="_blank">Governo da Bahia</a>
  </div>
  <div class="empresa">
    <a href="https://www.neoenergia.com/web/bahia" target="_blank">COELBA</a>
  </div>
  <div class="empresa">
    <a href="https://www.instagram.com/limpurb/" target="_blank">LIMPURB</a>
  </div>
  <div class="empresa">
    <a href="https://www.embasa.ba.gov.br/" target="_blank">EMBASA</a>
  </div>
  <div class="empresa">
    <a href="https://www.instagram.com/coopcooperbrava/" target="_blank">COOPERBRAVA</a>
  </div>
  <div class="empresa">
    <a href="https://www.instagram.com/cooperes_cooperativa/" target="_blank">COOPERES</a>
  </div>
</section>



  <!-- Bot√£o Atendimento Flutuante -->
  <div id="atendimento-btn" title="Atendimento">
    <span>Atendimento</span> üí¨
  </div>

  <!-- Modal de Suporte com envio ass√≠ncrono -->
  <div id="modal-suporte">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <h3>Enviar mensagem ao suporte</h3>
      <form id="form-suporte">
        <input type="email" name="email" placeholder="Seu e-mail" required>
        <textarea name="message" placeholder="Digite sua mensagem..." required></textarea>
        <input type="submit" value="Enviar">
        <p id="sucesso-msg">Mensagem enviada com sucesso!</p>
      </form>
    </div>
  </div>

  <script src="js/main.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      fetch("sidebar.html")
        .then(res => res.text())
        .then(html => {
          document.getElementById("sidebar-container").innerHTML = html;

          window.toggleSidebar = function () {
            const sidebar = document.getElementById("sidebar");
            const toggleBtn = document.querySelector(".sidebar-toggle");
            const isMobile = window.innerWidth <= 768;

            if (isMobile) {
              document.body.classList.toggle("sidebar-open");
            } else {
              const isCollapsed = sidebar.classList.toggle("collapsed");
              document.body.classList.toggle("sidebar-collapsed", isCollapsed);
              toggleBtn.textContent = isCollapsed ? "¬ª" : "‚ò∞";
            }
          };

          window.sair = function () {
            localStorage.removeItem('email');
            window.location.href = "index.html";
          };

          document.addEventListener("click", (e) => {
            const sidebar = document.getElementById("sidebar");
            const toggleBtn = document.querySelector(".sidebar-toggle");
            if (
              document.body.classList.contains("sidebar-open") &&
              !sidebar.contains(e.target) &&
              !toggleBtn.contains(e.target)
            ) {
              document.body.classList.remove("sidebar-open");
            }
          });
        });

      const atendimentoBtn = document.getElementById('atendimento-btn');
      const modalSuporte = document.getElementById('modal-suporte');
      const closeBtn = document.querySelector('.close-btn');
      const formSuporte = document.getElementById('form-suporte');
      const sucessoMsg = document.getElementById('sucesso-msg');

      atendimentoBtn.addEventListener('click', () => {
        modalSuporte.classList.add('show');
      });

      closeBtn.addEventListener('click', () => {
        modalSuporte.classList.remove('show');
      });

      formSuporte.addEventListener('submit', async (e) => {
        e.preventDefault();

        const formData = new FormData(formSuporte);
        const data = Object.fromEntries(formData.entries());

        try {
          const res = await fetch('https://formsubmit.co/ajax/rafaellacerda2004@gmail.com', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Accept': 'application/json'
            },
            body: JSON.stringify(data)
          });

          if (res.ok) {
            sucessoMsg.style.display = 'block';
            formSuporte.reset();

            setTimeout(() => {
              sucessoMsg.style.display = 'none';
              modalSuporte.classList.remove('show');
            }, 3000);
          } else {
            alert('Erro ao enviar. Tente novamente.');
          }
        } catch (err) {
          alert('Erro de rede. Verifique sua conex√£o.');
        }
      });
    });
  </script>
</body>
</html>
